1953-1849
2018-20
1980-1956
2018-2010
2018-2000
1956-1943
1956-1946
library(RMySQL)
mydb = dbConnect(MySQL(),
user='baltimoresun',
password='ZmhR+mXKnEbH4cEM',
dbname='criminal_circuit_baltimore_city',
host='clue.ctdfdskvfoc5.us-east-1.rds.amazonaws.com')
dbListTables(mydb)
res <- dbSendQuery(con, "SELECT * FROM related_person_information WHERE connection = 'POLICE OFFICER'")
res <- dbSendQuery(mydb, "SELECT * FROM related_person_information WHERE connection = 'POLICE OFFICER'")
dbFetch(res)
res <- dbSendQuery(mydb, "SELECT * FROM related_person_information")
res <- dbSendQuery(mydb, "SELECT * FROM related_person_information")
res <- dbSendQuery(mydb, "SELECT * FROM related_person_information WHERE connection = 'POLICE OFFICER'")
dbClearResult(res)
res <- dbSendQuery(mydb, "SELECT * FROM related_person_information")
mydb = dbConnect(MySQL(),
user='baltimoresun',
password='ZmhR+mXKnEbH4cEM',
dbname='criminal_circuit_baltimore_city',
host='clue.ctdfdskvfoc5.us-east-1.rds.amazonaws.com')
dbListTables(mydb)
res <- dbSendQuery(mydb, "SELECT * FROM related_person_information")
dbFetch(res)
View(res)
dbFetch(res) %>% as.data.frame()
library(tidyverse)
dbFetch(res) %>% as.data.frame()
test <- dbFetch(res) %>% as.data.frame()
View(test)
View(test)
47+43
2018-1907
288/5335
66/5335
66/2545
2018-1912
2018-2008
60/188
19/32
187+15
52+8
641430 - 611648
setwd("~/Documents/shootings")
library('tidyverse')
list.files()
crime <- read_csv('crime.csv')
crime <- read_csv("BPD_Part_1_Victim_Based_Crime_Data.csv")
head(crime)
crime <- read.csv("BPD_Part_1_Victim_Based_Crime_Data.csv")
crime <- read.csv("BPD_Part_1_Victim_Based_Crime_Data.csv", stringsAsFactors = F)
head(crime)
View(crime)
library('lubridate')
glimpse(crime)
crime$date <- mdy(CrimeDate)
crime$date <- mdy(crime$CrimeDate)
head(crime)
table(crime$Total.Incidents)
crime$dow <- wday(crime$date, label=TRUE)
table(crime$Description)
shootings <- crime %>% filter(Description == 'SHOOTING')
View(shootings)
# get the time period (minimum date and maximum date) of the data set,
time.min <- shootings$date[1]
time.max <- shootings$date[length(shootings$date) - 1]
time.min
time.max
time.max <- shootings$date[length(shootings$date)]
time.max
# create a dataframe of all the days spanning that time period
all.dates.frame <- data.frame(list(date = seq(time.min, time.max, by="day")))
View(all.dates.frame)
mine.in
time.min
shootings <- crime %>% filter(Description == 'SHOOTING') %>% arrange(date)
# get the time period (minimum date and maximum date) of the data set
time.min <- shootings$date[1]
time.max <- shootings$date[length(shootings$date)]
time.min
time.max
# create a dataframe of all the days spanning that time period
all.dates.frame <- data.frame(list(date = seq(time.min, time.max, by="day")))
# merge this dataframe with the vector of booking dates to get the dates with no shootings
merged.data <- merge(all.dates.frame, shootings , all = T)
View(merged.data)
# fill in the NAs with zeros
merged.data$n <- ifelse(is.na(merged$data), 0, 1)
# fill in the NAs with zeros
merged.data$n <- ifelse(is.na(merged.data$Total.Incidents), 0, 1)
# fill in the NAs with zeros
merged.data$n <- ifelse(is.na(merged.data$Total.Incidents), 0, Total.Incidents)
# fill in the NAs with zeros
merged.data$n <- ifelse(is.na(merged.data$Total.Incidents), 0, merged.data$Total.Incidents)
table(merged.data$Total.Incidents)
# merge this dataframe with the vector of booking dates to get the dates with no shootings
merged.data <- merge(all.dates.frame, shootings , all = T)
# fill in the NAs with zeros
merged.data$n <- ifelse(is.na(merged.data$Total.Incidents), 0, merged.data$Total.Incidents)
table(merged.data$Total.Incidents)
# merge this dataframe with the vector of booking dates to get the dates with no shootings
merged.data <- merge(all.dates.frame, shootings , all = T)
# fill in the NAs with zeros
merged.data$n <- ifelse(is.na(merged.data$Total.Incidents) == T, 0, merged.data$Total.Incidents)
table(merged.data$n)
merged.data <- merged.data %>% mutate(lag3_n = n+lag(n, 1)+lag(n, 2))
View(merged.data)
merged.data %>% filter(n == 0)
merged.data %>% filter(lag3_n == 0) %>% View()
# create a dataframe of all the days spanning that time period
all.dates.frame <- data.frame(list(date = seq(time.min, time.max, by="day")))
# merge this dataframe with the vector of booking dates to get the dates with no shootings
merged.data <- merge(all.dates.frame, shootings , all = T)
merged.data$dow <- wday(merged.data$date, label=TRUE)
# fill in the NAs with zeros
merged.data$n <- ifelse(is.na(merged.data$Total.Incidents) == T, 0, merged.data$Total.Incidents)
table(merged.data$n)
merged.data <- merged.data %>% mutate(lag3_n = n+lag(n, 1)+lag(n, 2))
merge.data %>% filter(lag3_n == 0) %>% View()
merged.data %>% filter(lag3_n == 0) %>% View()
merged.data %>% filter(lag3_n == 0 & dow == 'Monday') %>% View()
table(merged.data$dow)
merged.data %>% filter(lag3_n == 0 & dow == 'Mon') %>% View()
mondays <- merged.data %>% filter(lag3_n == 0 & dow == 'Mon')
View(shootings)
View(mondays)
shootings.bydate <- shootings %>% group_by(date) %>% summarise(n = n())
shootings.bydate <- shootings %>% group_by(date, dow) %>% summarise(n = n())
shootings.bydate <- shootings %>% group_by(date) %>% summarise(n = n())
# get the time period (minimum date and maximum date) of the data set
time.min <- shootings.bydate$date[1]
time.max <- shootings.bydate$date[length(shootings.bydate$date)]
# create a dataframe of all the days spanning that time period
all.dates.frame <- data.frame(list(date = seq(time.min, time.max, by="day")))
# merge this dataframe with the vector of booking dates to get the dates with no shootings
merged.data <- merge(all.dates.frame, shootings.bydate , all = T)
merged.data$dow <- wday(merged.data$date, label=TRUE)
# fill in the NAs with zeros
merged.data$n <- ifelse(is.na(merged.data$Total.Incidents) == T, 0, merged.data$Total.Incidents)
table(merged.data$n)
# merge this dataframe with the vector of booking dates to get the dates with no shootings
merged.data <- merge(all.dates.frame, shootings.bydate , all = T)
merged.data$dow <- wday(merged.data$date, label=TRUE)
View(merged.data)
# fill in the NAs with zeros
merged.data$n <- ifelse(is.na(merged.data$n) == T, 0, merged.data$n)
table(merged.data$n)
View(merged.data)
mondays <- merged.data %>% filter(lag3_n == 0 & dow == 'Mon')
merged.data <- merged.data %>% mutate(lag3_n = n+lag(n, 1)+lag(n, 2))
mondays <- merged.data %>% filter(lag3_n == 0 & dow == 'Mon')
View(mondays)
merged.data <- merged.data %>% mutate(lag3_n = lag(n, 1)+lag(n, 2)+lag(n, 3))
mondays <- merged.data %>% filter(lag3_n == 0 & dow == 'Mon')
View)mondays
View(mondays)
shootings <- crime %>% filter((Description == 'SHOOTING' | Description == 'HOMICIDE') & Weapon == 'FIREARM') %>% arrange(date)
table(shootings$Weapon)
table(shootings$Description)
crime$date <- mdy(crime$CrimeDate)
crime <- read.csv("BPD_Part_1_Victim_Based_Crime_Data.csv", stringsAsFactors = F)
crime$date <- mdy(crime$CrimeDate)
shootings <- crime %>% filter((Description == 'SHOOTING' | Description == 'HOMICIDE') & Weapon == 'FIREARM') %>% arrange(date)
shootings.bydate <- shootings %>% group_by(date) %>% summarise(n = n())
View(shootings.bydate)
# get the time period (minimum date and maximum date) of the data set
time.min <- shootings.bydate$date[1]
time.max <- shootings.bydate$date[length(shootings.bydate$date)]
time.min
time.max
# create a dataframe of all the days spanning that time period
all.dates.frame <- data.frame(list(date = seq(time.min, time.max, by="day")))
View(all.dates.frame)
# create a dataframe of all the days spanning that time period
all.dates.frame <- data.frame(list(date = seq(time.min, time.max, by="day")))
# merge this dataframe with the vector of booking dates to get the dates with no shootings
merged.data <- merge(all.dates.frame, shootings.bydate , all = T)
View(merged.data)
View(all.dates.frame)
merged.data$dow <- wday(merged.data$date, label=TRUE)
# fill in the NAs with zeros
merged.data$n <- ifelse(is.na(merged.data$n) == T, 0, merged.data$n)
table(merged.data$n)
merged.data <- merged.data %>% mutate(lag3_n = lag(n, 1)+lag(n, 2)+lag(n, 3))
mondays <- merged.data %>% filter(lag3_n == 0 & dow == 'Mon')
View(mondays)
View(shootings)
max.time
max.date
